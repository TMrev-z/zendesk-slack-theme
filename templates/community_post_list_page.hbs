<div class="community-container">
  <nav class="community-breadcrumbs">
    <ol class="breadcrumbs">
      <li class="breadcrumbs-item">
        <a href="{{help_center.url}}">{{help_center.name}}</a>
      </li>
      <li class="breadcrumbs-item">
        <a href="{{community.url}}">ã‚³ãƒŸãƒ¥ãƒ‹ãƒ†ã‚£</a>
      </li>
      {{#if topic}}
      <li class="breadcrumbs-item">
        <a href="{{topic.url}}">{{topic.name}}</a>
      </li>
      {{/if}}
    </ol>
  </nav>

  <header class="community-header">
    <div class="community-header-content">
      {{#if topic}}
      <h1 class="community-title">{{topic.name}}</h1>
      {{#if topic.description}}
      <div class="community-description">
        <p>{{topic.description}}</p>
      </div>
      {{/if}}
      {{else}}
      <h1 class="community-title">ã‚³ãƒŸãƒ¥ãƒ‹ãƒ†ã‚£ãƒ‡ã‚£ã‚¹ã‚«ãƒƒã‚·ãƒ§ãƒ³</h1>
      <div class="community-description">
        <p>ä»–ã®ãƒ¦ãƒ¼ã‚¶ãƒ¼ã¨æƒ…å ±ã‚’å…±æœ‰ã—ã€è³ªå•ã‚„ã‚¢ã‚¤ãƒ‡ã‚¢ã‚’è­°è«–ã—ã¾ã—ã‚‡ã†ã€‚</p>
      </div>
      {{/if}}
    </div>
    
    <div class="community-actions">
      {{#if current_user}}
      <a href="{{community.url}}/posts/new{{#if topic}}?topic_id={{topic.id}}{{/if}}" class="btn btn-primary community-new-post">
        æ–°ã—ã„æŠ•ç¨¿
      </a>
      {{else}}
      <a href="{{help_center.signin_url}}" class="btn btn-secondary">
        ã‚µã‚¤ãƒ³ã‚¤ãƒ³ã—ã¦æŠ•ç¨¿
      </a>
      {{/if}}
    </div>
  </header>

  <main class="community-main">
    {{#if posts}}
    <div class="community-posts">
      <div class="posts-header">
        <div class="posts-count">
          {{posts.length}} ä»¶ã®æŠ•ç¨¿
        </div>
        
        <div class="posts-sorting">
          <label for="sort-select">ä¸¦ã³æ›¿ãˆ:</label>
          <select id="sort-select" class="posts-sort-select">
            <option value="recent">æœ€æ–°é †</option>
            <option value="popular">äººæ°—é †</option>
            <option value="answered">å›ç­”æ¸ˆã¿</option>
          </select>
        </div>
      </div>

      <ul class="posts-list">
        {{#each posts}}
        <li class="post-item">
          <article class="community-post">
            <div class="post-stats">
              <div class="post-vote-count">
                <span class="vote-count">{{vote_sum}}</span>
                <span class="vote-label">æŠ•ç¥¨</span>
              </div>
              
              <div class="post-comment-count">
                <span class="comment-count">{{comment_count}}</span>
                <span class="comment-label">ã‚³ãƒ¡ãƒ³ãƒˆ</span>
              </div>
            </div>

            <div class="post-content">
              <h3 class="post-title">
                <a href="{{url}}" class="post-link">{{title}}</a>
              </h3>
              
              {{#if details}}
              <div class="post-excerpt">
                <p>{{excerpt details characters=200}}</p>
              </div>
              {{/if}}
              
              <div class="post-meta">
                <div class="post-author">
                  {{#if author.avatar_url}}
                  <img src="{{author.avatar_url}}" alt="{{author.name}}" class="post-author-avatar" loading="lazy">
                  {{/if}}
                  <span class="post-author-name">{{author.name}}</span>
                </div>
                
                <div class="post-dates">
                  <time class="post-created" datetime="{{created_at}}">
                    {{date created_at timeago=true}}
                  </time>
                  
                  {{#if edited_at}}
                  <time class="post-edited" datetime="{{edited_at}}">
                    ç·¨é›†: {{date edited_at timeago=true}}
                  </time>
                  {{/if}}
                </div>
                
                {{#if status}}
                <div class="post-status post-status--{{status}}">
                  {{#is status 'solved'}}
                    <span class="post-status-icon">âœ…</span>
                    <span class="post-status-text">è§£æ±ºæ¸ˆã¿</span>
                  {{/is}}
                  {{#is status 'answered'}}
                    <span class="post-status-icon">ğŸ’¬</span>
                    <span class="post-status-text">å›ç­”æ¸ˆã¿</span>
                  {{/is}}
                  {{#is status 'open'}}
                    <span class="post-status-icon">ğŸ”“</span>
                    <span class="post-status-text">è­°è«–ä¸­</span>
                  {{/is}}
                </div>
                {{/if}}
              </div>

              {{#if labels}}
              <div class="post-labels">
                {{#each labels}}
                <span class="post-label">{{name}}</span>
                {{/each}}
              </div>
              {{/if}}
            </div>
          </article>
        </li>
        {{/each}}
      </ul>
      
      <!-- Pagination -->
      {{pagination}}
    </div>
    
    {{else}}
    <div class="community-empty">
      <div class="empty-state">
        <div class="empty-state-icon">ğŸ’¬</div>
        <h2 class="empty-state-title">æŠ•ç¨¿ãŒã¾ã ã‚ã‚Šã¾ã›ã‚“</h2>
        <div class="empty-state-description">
          {{#if topic}}
          <p>ã€Œ{{topic.name}}ã€ã«ã¯ã¾ã æŠ•ç¨¿ãŒã‚ã‚Šã¾ã›ã‚“ã€‚æœ€åˆã®æŠ•ç¨¿ã‚’ã—ã¦ãƒ‡ã‚£ã‚¹ã‚«ãƒƒã‚·ãƒ§ãƒ³ã‚’å§‹ã‚ã¾ã—ã‚‡ã†ã€‚</p>
          {{else}}
          <p>ã‚³ãƒŸãƒ¥ãƒ‹ãƒ†ã‚£ã«ã¯ã¾ã æŠ•ç¨¿ãŒã‚ã‚Šã¾ã›ã‚“ã€‚æœ€åˆã®æŠ•ç¨¿ã‚’ã—ã¦ãƒ‡ã‚£ã‚¹ã‚«ãƒƒã‚·ãƒ§ãƒ³ã‚’å§‹ã‚ã¾ã—ã‚‡ã†ã€‚</p>
          {{/if}}
        </div>
        
        <div class="empty-state-actions">
          {{#if current_user}}
          <a href="{{community.url}}/posts/new{{#if topic}}?topic_id={{topic.id}}{{/if}}" class="btn btn-primary">
            æœ€åˆã®æŠ•ç¨¿ã‚’ã™ã‚‹
          </a>
          {{else}}
          <a href="{{help_center.signin_url}}" class="btn btn-secondary">
            ã‚µã‚¤ãƒ³ã‚¤ãƒ³ã—ã¦æŠ•ç¨¿
          </a>
          {{/if}}
          <a href="{{help_center.url}}" class="btn btn-secondary">
            ãƒ˜ãƒ«ãƒ—ã‚»ãƒ³ã‚¿ãƒ¼ã«æˆ»ã‚‹
          </a>
        </div>
      </div>
    </div>
    {{/if}}
  </main>

  <aside class="community-sidebar">
    {{#if community.topics}}
    <div class="community-topics">
      <h3>ãƒˆãƒ”ãƒƒã‚¯</h3>
      <ul class="topics-list">
        {{#each community.topics}}
        <li class="topic-item">
          <a href="{{url}}" class="topic-link {{#if selected}}topic-link--active{{/if}}">
            {{name}}
            {{#if post_count}}
            <span class="topic-post-count">({{post_count}})</span>
            {{/if}}
          </a>
        </li>
        {{/each}}
      </ul>
    </div>
    {{/if}}

    <div class="community-guidelines">
      <h3>ã‚³ãƒŸãƒ¥ãƒ‹ãƒ†ã‚£ã‚¬ã‚¤ãƒ‰ãƒ©ã‚¤ãƒ³</h3>
      <ul class="guidelines-list">
        <li>ä»–ã®ãƒ¦ãƒ¼ã‚¶ãƒ¼ã‚’å°Šé‡ã—ã¾ã—ã‚‡ã†</li>
        <li>å»ºè¨­çš„ãªè­°è«–ã‚’å¿ƒãŒã‘ã¾ã—ã‚‡ã†</li>
        <li>é–¢é€£ã™ã‚‹æƒ…å ±ã‚’å…±æœ‰ã—ã¾ã—ã‚‡ã†</li>
        <li>ã‚¹ãƒ‘ãƒ ã‚„ç„¡é–¢ä¿‚ãªæŠ•ç¨¿ã¯é¿ã‘ã¾ã—ã‚‡ã†</li>
      </ul>
    </div>
  </aside>
</div>