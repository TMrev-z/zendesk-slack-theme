<div class="contributions-container">
  <nav class="contributions-breadcrumbs">
    <ol class="breadcrumbs">
      <li class="breadcrumbs-item">
        <a href="{{help_center.url}}">{{help_center.name}}</a>
      </li>
      <li class="breadcrumbs-item">
        <a href="{{community.url}}">ã‚³ãƒŸãƒ¥ãƒ‹ãƒ†ã‚£</a>
      </li>
    </ol>
  </nav>

  <header class="contributions-header">
    <div class="contributions-header-content">
      <h1 class="contributions-title">
        {{#if user}}
        {{user.name}}ã•ã‚“ã®è²¢çŒ®
        {{else}}
        ã‚³ãƒŸãƒ¥ãƒ‹ãƒ†ã‚£è²¢çŒ®
        {{/if}}
      </h1>
      <div class="contributions-description">
        {{#if user}}
        <p>{{user.name}}ã•ã‚“ã®ã‚³ãƒŸãƒ¥ãƒ‹ãƒ†ã‚£ã¸ã®è²¢çŒ®ã‚’ç¢ºèªã§ãã¾ã™ã€‚</p>
        {{else}}
        <p>ã‚³ãƒŸãƒ¥ãƒ‹ãƒ†ã‚£ãƒ¡ãƒ³ãƒãƒ¼ã®è²¢çŒ®ã‚’ç¢ºèªã—ã¾ã—ã‚‡ã†ã€‚</p>
        {{/if}}
      </div>
    </div>

    {{#if user}}
    <div class="user-profile">
      {{#if user.avatar_url}}
      <img src="{{user.avatar_url}}" alt="{{user.name}}" class="user-avatar" loading="lazy">
      {{/if}}
      <div class="user-info">
        <div class="user-name">{{user.name}}</div>
        {{#if user.title}}
        <div class="user-title">{{user.title}}</div>
        {{/if}}
        {{#if user.created_at}}
        <div class="user-joined">
          {{date user.created_at}}ã«å‚åŠ 
        </div>
        {{/if}}
      </div>
    </div>
    {{/if}}
  </header>

  <main class="contributions-main">
    {{#if user}}
    <!-- User-specific contributions -->
    <div class="contributions-stats">
      <h2>è²¢çŒ®çµ±è¨ˆ</h2>
      <div class="stats-grid">
        <div class="stat-card">
          <div class="stat-number">{{user.posts_count}}</div>
          <div class="stat-label">æŠ•ç¨¿</div>
        </div>
        <div class="stat-card">
          <div class="stat-number">{{user.comments_count}}</div>
          <div class="stat-label">ã‚³ãƒ¡ãƒ³ãƒˆ</div>
        </div>
        <div class="stat-card">
          <div class="stat-number">{{user.votes_received}}</div>
          <div class="stat-label">å—ã‘å–ã£ãŸæŠ•ç¥¨</div>
        </div>
        <div class="stat-card">
          <div class="stat-number">{{user.solutions_count}}</div>
          <div class="stat-label">è§£æ±ºã—ãŸè³ªå•</div>
        </div>
      </div>
    </div>

    <div class="contributions-content">
      <div class="contributions-tabs">
        <nav class="tabs-nav">
          <button class="tab-btn tab-btn--active" data-tab="posts">æŠ•ç¨¿</button>
          <button class="tab-btn" data-tab="comments">ã‚³ãƒ¡ãƒ³ãƒˆ</button>
          <button class="tab-btn" data-tab="solutions">è§£æ±ºç­–</button>
          <button class="tab-btn" data-tab="votes">æŠ•ç¥¨</button>
        </nav>
      </div>

      <!-- Posts Tab -->
      <div class="tab-content tab-content--active" id="posts-tab">
        {{#if user.posts}}
        <div class="contributions-list">
          <h3>æŠ•ç¨¿ã—ãŸè¨˜äº‹ ({{user.posts.length}})</h3>
          <ul class="posts-list">
            {{#each user.posts}}
            <li class="contribution-item">
              <article class="contribution-post">
                <div class="contribution-stats">
                  <div class="contribution-votes">
                    <span class="votes-count">{{vote_sum}}</span>
                    <span class="votes-label">æŠ•ç¥¨</span>
                  </div>
                  <div class="contribution-comments">
                    <span class="comments-count">{{comment_count}}</span>
                    <span class="comments-label">ã‚³ãƒ¡ãƒ³ãƒˆ</span>
                  </div>
                  {{#if status}}
                  <div class="contribution-status contribution-status--{{status}}">
                    {{#is status 'solved'}}
                      <span class="status-icon">âœ…</span>
                      <span class="status-text">è§£æ±ºæ¸ˆã¿</span>
                    {{/is}}
                    {{#is status 'answered'}}
                      <span class="status-icon">ğŸ’¬</span>
                      <span class="status-text">å›ç­”æ¸ˆã¿</span>
                    {{/is}}
                  </div>
                  {{/if}}
                </div>

                <div class="contribution-content">
                  <h4 class="contribution-title">
                    <a href="{{url}}" class="contribution-link">{{title}}</a>
                  </h4>
                  {{#if topic}}
                  <div class="contribution-topic">
                    <a href="{{topic.url}}" class="topic-tag">{{topic.name}}</a>
                  </div>
                  {{/if}}
                  <div class="contribution-meta">
                    <time class="contribution-date" datetime="{{created_at}}">
                      {{date created_at timeago=true}}
                    </time>
                    {{#if last_activity_at}}
                    <time class="contribution-activity" datetime="{{last_activity_at}}">
                      æœ€çµ‚æ´»å‹•: {{date last_activity_at timeago=true}}
                    </time>
                    {{/if}}
                  </div>
                </div>
              </article>
            </li>
            {{/each}}
          </ul>
        </div>
        {{else}}
        <div class="contributions-empty">
          <div class="empty-state">
            <div class="empty-state-icon">ğŸ“</div>
            <h3 class="empty-state-title">æŠ•ç¨¿ãŒã‚ã‚Šã¾ã›ã‚“</h3>
            <p class="empty-state-description">ã¾ã æŠ•ç¨¿ã‚’ä½œæˆã—ã¦ã„ã¾ã›ã‚“ã€‚</p>
          </div>
        </div>
        {{/if}}
      </div>

      <!-- Comments Tab -->
      <div class="tab-content" id="comments-tab">
        {{#if user.comments}}
        <div class="contributions-list">
          <h3>ã‚³ãƒ¡ãƒ³ãƒˆ ({{user.comments.length}})</h3>
          <ul class="comments-list">
            {{#each user.comments}}
            <li class="contribution-item">
              <article class="contribution-comment">
                <div class="comment-content">
                  <div class="comment-body">{{excerpt body characters=200}}</div>
                  <div class="comment-post-info">
                    <span class="comment-post-label">æŠ•ç¨¿:</span>
                    <a href="{{post.url}}" class="comment-post-link">{{post.title}}</a>
                  </div>
                  <div class="comment-meta">
                    <div class="comment-votes">{{vote_sum}} æŠ•ç¥¨</div>
                    <time class="comment-date" datetime="{{created_at}}">
                      {{date created_at timeago=true}}
                    </time>
                  </div>
                </div>
              </article>
            </li>
            {{/each}}
          </ul>
        </div>
        {{else}}
        <div class="contributions-empty">
          <div class="empty-state">
            <div class="empty-state-icon">ğŸ’¬</div>
            <h3 class="empty-state-title">ã‚³ãƒ¡ãƒ³ãƒˆãŒã‚ã‚Šã¾ã›ã‚“</h3>
            <p class="empty-state-description">ã¾ã ã‚³ãƒ¡ãƒ³ãƒˆã‚’æŠ•ç¨¿ã—ã¦ã„ã¾ã›ã‚“ã€‚</p>
          </div>
        </div>
        {{/if}}
      </div>

      <!-- Solutions Tab -->
      <div class="tab-content" id="solutions-tab">
        {{#if user.solutions}}
        <div class="contributions-list">
          <h3>è§£æ±ºã—ãŸå•é¡Œ ({{user.solutions.length}})</h3>
          <ul class="solutions-list">
            {{#each user.solutions}}
            <li class="contribution-item">
              <article class="contribution-solution">
                <div class="solution-badge">
                  <span class="solution-icon">âœ…</span>
                  <span class="solution-text">è§£æ±ºæ¸ˆã¿</span>
                </div>
                <div class="solution-content">
                  <h4 class="solution-title">
                    <a href="{{post.url}}" class="solution-link">{{post.title}}</a>
                  </h4>
                  <div class="solution-excerpt">{{excerpt solution_text characters=150}}</div>
                  <div class="solution-meta">
                    <time class="solution-date" datetime="{{solved_at}}">
                      {{date solved_at timeago=true}}ã«è§£æ±º
                    </time>
                    {{#if topic}}
                    <a href="{{topic.url}}" class="solution-topic">{{topic.name}}</a>
                    {{/if}}
                  </div>
                </div>
              </article>
            </li>
            {{/each}}
          </ul>
        </div>
        {{else}}
        <div class="contributions-empty">
          <div class="empty-state">
            <div class="empty-state-icon">ğŸ¯</div>
            <h3 class="empty-state-title">è§£æ±ºã—ãŸå•é¡ŒãŒã‚ã‚Šã¾ã›ã‚“</h3>
            <p class="empty-state-description">ã¾ã å•é¡Œã‚’è§£æ±ºã—ã¦ã„ã¾ã›ã‚“ã€‚</p>
          </div>
        </div>
        {{/if}}
      </div>

      <!-- Votes Tab -->
      <div class="tab-content" id="votes-tab">
        {{#if user.votes}}
        <div class="contributions-list">
          <h3>æŠ•ç¥¨å±¥æ­´ ({{user.votes.length}})</h3>
          <ul class="votes-list">
            {{#each user.votes}}
            <li class="contribution-item">
              <article class="contribution-vote">
                <div class="vote-type vote-type--{{type}}">
                  {{#is type 'up'}}
                    <span class="vote-icon">ğŸ‘</span>
                    <span class="vote-text">ã„ã„ã­</span>
                  {{/is}}
                  {{#is type 'down'}}
                    <span class="vote-icon">ğŸ‘</span>
                    <span class="vote-text">ã‚ˆããªã„</span>
                  {{/is}}
                </div>
                <div class="vote-content">
                  <h4 class="vote-title">
                    <a href="{{post.url}}" class="vote-link">{{post.title}}</a>
                  </h4>
                  <div class="vote-meta">
                    <time class="vote-date" datetime="{{created_at}}">
                      {{date created_at timeago=true}}
                    </time>
                    <span class="vote-author">æŠ•ç¨¿è€…: {{post.author.name}}</span>
                  </div>
                </div>
              </article>
            </li>
            {{/each}}
          </ul>
        </div>
        {{else}}
        <div class="contributions-empty">
          <div class="empty-state">
            <div class="empty-state-icon">ğŸ‘</div>
            <h3 class="empty-state-title">æŠ•ç¥¨å±¥æ­´ãŒã‚ã‚Šã¾ã›ã‚“</h3>
            <p class="empty-state-description">ã¾ã æŠ•ç¥¨ã‚’ã—ã¦ã„ã¾ã›ã‚“ã€‚</p>
          </div>
        </div>
        {{/if}}
      </div>
    </div>

    {{else}}
    <!-- General community contributions -->
    <div class="community-contributors">
      <h2>ã‚¢ã‚¯ãƒ†ã‚£ãƒ–ãªè²¢çŒ®è€…</h2>
      {{#if contributors}}
      <div class="contributors-grid">
        {{#each contributors}}
        <div class="contributor-card">
          <a href="{{contributions_url}}" class="contributor-link">
            {{#if avatar_url}}
            <img src="{{avatar_url}}" alt="{{name}}" class="contributor-avatar" loading="lazy">
            {{/if}}
            <div class="contributor-info">
              <div class="contributor-name">{{name}}</div>
              {{#if title}}
              <div class="contributor-title">{{title}}</div>
              {{/if}}
              <div class="contributor-stats">
                <div class="contributor-stat">
                  <span class="stat-value">{{posts_count}}</span>
                  <span class="stat-label">æŠ•ç¨¿</span>
                </div>
                <div class="contributor-stat">
                  <span class="stat-value">{{solutions_count}}</span>
                  <span class="stat-label">è§£æ±º</span>
                </div>
              </div>
            </div>
          </a>
        </div>
        {{/each}}
      </div>
      {{else}}
      <div class="contributors-empty">
        <p>è²¢çŒ®è€…ã®æƒ…å ±ã‚’èª­ã¿è¾¼ã‚“ã§ã„ã¾ã™...</p>
      </div>
      {{/if}}
    </div>
    {{/if}}

    <!-- Pagination -->
    {{pagination}}
  </main>

  <aside class="contributions-sidebar">
    {{#if user}}
    <div class="user-badges">
      <h3>ãƒãƒƒã‚¸</h3>
      {{#if user.badges}}
      <div class="badges-list">
        {{#each user.badges}}
        <div class="badge-item">
          <div class="badge-icon">{{icon}}</div>
          <div class="badge-info">
            <div class="badge-name">{{name}}</div>
            <div class="badge-description">{{description}}</div>
          </div>
        </div>
        {{/each}}
      </div>
      {{else}}
      <div class="badges-empty">
        <p>ã¾ã ãƒãƒƒã‚¸ã‚’ç²å¾—ã—ã¦ã„ã¾ã›ã‚“ã€‚</p>
      </div>
      {{/if}}
    </div>

    <div class="user-activity">
      <h3>æœ€è¿‘ã®æ´»å‹•</h3>
      {{#if user.recent_activity}}
      <ul class="activity-list">
        {{#each user.recent_activity}}
        <li class="activity-item">
          <div class="activity-type activity-type--{{type}}">
            {{#is type 'post'}}ğŸ“{{/is}}
            {{#is type 'comment'}}ğŸ’¬{{/is}}
            {{#is type 'vote'}}ğŸ‘{{/is}}
            {{#is type 'solution'}}âœ…{{/is}}
          </div>
          <div class="activity-content">
            <div class="activity-description">{{description}}</div>
            <time class="activity-date" datetime="{{created_at}}">
              {{date created_at timeago=true}}
            </time>
          </div>
        </li>
        {{/each}}
      </ul>
      {{else}}
      <div class="activity-empty">
        <p>æœ€è¿‘ã®æ´»å‹•ãŒã‚ã‚Šã¾ã›ã‚“ã€‚</p>
      </div>
      {{/if}}
    </div>
    {{/if}}

    <div class="contributions-guidelines">
      <h3>è²¢çŒ®ã®ã‚¬ã‚¤ãƒ‰ãƒ©ã‚¤ãƒ³</h3>
      <ul class="guidelines-list">
        <li>æœ‰ç”¨ã§å»ºè¨­çš„ãªã‚³ãƒ³ãƒ†ãƒ³ãƒ„ã‚’æŠ•ç¨¿ã—ã¾ã—ã‚‡ã†</li>
        <li>ä»–ã®ãƒ¡ãƒ³ãƒãƒ¼ã‚’åŠ©ã‘ã‚‹ã“ã¨ã‚’å¿ƒãŒã‘ã¾ã—ã‚‡ã†</li>
        <li>è³ªå•ã«ã¯ä¸å¯§ã«å›ç­”ã—ã¾ã—ã‚‡ã†</li>
        <li>è‰¯ã„ã‚³ãƒ³ãƒ†ãƒ³ãƒ„ã«ã¯ç©æ¥µçš„ã«æŠ•ç¥¨ã—ã¾ã—ã‚‡ã†</li>
      </ul>
    </div>

    <div class="contributions-navigation">
      <a href="{{community.url}}" class="btn btn-secondary">
        ã‚³ãƒŸãƒ¥ãƒ‹ãƒ†ã‚£ã«æˆ»ã‚‹
      </a>
    </div>
  </aside>
</div>